{% extends "base.html" %}

{% block body %}
  <div class="pure-g">
    <div class="pure-u-0 pure-u-md-1-8"></div>
    <div class="pure-u-1 pure-u-md-3-4">
      <div class="post">
	<h1><span style="color:#488AC7">STUY</span><span style="color:#C24641">LOST</span><span style="color:#488AC7">FOUND</span></h1>
	<p>
	  Stuyvesant Lost and Found is a facebook app for all Stuyvesant students, where they can find any items they lost, or post any items they found.
	</p>
	<p>
	  This replaces the current system of posting items on facebook groups, which is year-specific and does not encompass all grades, and posts for lost or found items are quickly buried by other posts in the groups. However, it improves upon current system by integrating itself with facebook and so on idk someone improve on this pretnetious sounding thing
	</p>
	<p>
	  Developed by:<br>
	  Tiffany Lei<br>
	  Cindy Li<br>
	  Michael Mattson<br>
	  Dong Shin<br>
	  <a href="http://github.com/mmattson22/Glowing-Noodles/">Github</a><br>

	</p>
      </div>
    </div>
    <div class="pure-u-0 pure-u-md-1-8"></div>
  </div>
  <script>
    (function (window, document) {
    var menu = document.getElementById('menu'),
    WINDOW_CHANGE_EVENT = ('onorientationchange' in window) ? 'orientationchange':'resize';

    function toggleHorizontal() {
    [].forEach.call(
    document.getElementById('menu').querySelectorAll('.custom-can-transform'),
    function(el){
    el.classList.toggle('pure-menu-horizontal');
    }
    );
    };

    function toggleMenu() {
    // set timeout so that the panel has a chance to roll up
    // before the menu switches states
    if (menu.classList.contains('open')) {
    setTimeout(toggleHorizontal, 500);
    }
    else {
    toggleHorizontal();
    }
    menu.classList.toggle('open');
    document.getElementById('toggle').classList.toggle('x');
    };

    function closeMenu() {
    if (menu.classList.contains('open')) {
    toggleMenu();
    }
    }

    document.getElementById('toggle').addEventListener('click', function (e) {
    toggleMenu();
    });

    window.addEventListener(WINDOW_CHANGE_EVENT, closeMenu);
    })(this, this.document);


    function statusChangeCallback(response) {
    console.log('statusChangeCallback');
    console.log(response);
    // The response object is returned with a status field that lets the
    // app know the current login status of the person.
    // Full docs on the response object can be found in the documentation
    // for FB.getLoginStatus().
    if (response.status === 'connected') {
    // Logged into your app and Facebook.
    testAPI();
    } else if (response.status === 'not_authorized') {
    // The person is logged into Facebook, but not your app.
    document.getElementById('status').innerHTML = 'Please log ' +
    'into this app.';
    } else {
    // The person is not logged into Facebook, so we're not sure if
    // they are logged into this app or not.
    document.getElementById('status').innerHTML = 'Please log ' +
    'into Facebook.';
    }
    }
    
    function checkLoginState() {
    FB.getLoginStatus(function(response) {
    statusChangeCallback(response);
    });
    }
    
    window.fbAsyncInit = function() {
    FB.init({
    appId      : '495797037296598',
    cookie     : true,  // enable cookies to allow the server to access
    // the session
    xfbml      : true,  // parse social plugins on this page
    version    : 'v2.5' // use graph api version 2.5
    });
    
    FB.getLoginStatus(function(response) {
    statusChangeCallback(response);
    });
    };

    (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
    
    function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
    console.log('Successful login for: ' + response.name);
    document.getElementById('status').innerHTML =
    'Thanks for logging in, ' + response.name + '! Your account is now linked to Stuyvesant Lost and Found.';
    });
    }
  </script>

  <fb:login-button autologoutlink="true" scope="public_profile,email" onlogin="checkLoginState();">
  </fb:login-button>
  <div id="status"></div>

{% endblock body %}
